
<div class="bg-brawl-sea-blue min-h-screen text-brawl-white brawl-font">
  <app-brawl-header></app-brawl-header>

  <div class="grid lg:grid-cols-2 xs:p-10 p-5 gap-20">
    <div class="grid lg:h-screen h-max lg:sticky py-5 top-0 flex-col items-center gap-12" style="grid-template-rows: auto minmax(0, 1fr) auto">
      <div class="text-shadow text-border-sm flex items-center mb-6 justify-center gap-8">
        <button class="p-1 bg-brawl-gold rounded-lg hover:bg-brawl-yellow" (click)="goHome()">
          <img src="/images/icons/left-arrow.png" alt="left-arrow" class="w-8 h-8">
        </button>
        <h1 class="text-2xl font-bold">DETALLES DE LA CAJA</h1>
      </div>

      <div class="w-full p-5 sm:p-0 h-44 lg:h-full flex flex-1 justify-center items-center spotlight-blue">
        <img src="/images/boxes/common-box.png" alt="common-box" class="w-full h-full object-contain max-w-64 max-h-64 hover:scale-110 transition-all hover:rotate-12">
      </div>

      <div class="flex flex-col justify-center gap-5 text-shadow text-border-xs">
        <h1 class="text-5xl text-border-sm font-bold text-center">
          {{ box.name }} <h2 class="text-lg text-border-xs text-brawl-gold">{{ box.price }} €</h2>
        </h1>
        <div class="text-center items-center text-xl flex flex-col gap-2 justify-center">
          <span>
            Quedan <span class="text-brawl-green">{{ box.boxesLeft }}</span> unidades
          </span>

          <span>
            Contiene <span class="text-brawl-green">{{ box.brawlerQuantity }}</span> brawlers
          </span>

          <span>
            <span class="text-brawl-green">{{ averageRating }}</span> calificación promedio
          </span>

          <button class="brawl-button max-w-72 mt-5 text-2xl">Añadir al carrito</button>
        </div>
      </div>

    </div>


    <div class="flex flex-col gap-5">
      <h1 class="text-5xl font-bold text-shadow text-border-sm">Brawlers disponibles</h1>

      <div class="flex flex-col gap-3">
        <div *ngFor="let rarity of rarities">
          <div class="bg-brawl-dark-slate my-5 h-1 flex items-center ps-5 text-shadow text-border-xs">
            {{ rarity.name }}
          </div>
          <div class="flex gap-4 flex-wrap">
            <div class="text-center relative" *ngFor="let brawler of brawlersByRarity[rarity.name]">
              <img src="{{brawler.image}}" [pTooltip]="brawler.name" tooltipPosition="top" alt="{{brawler.name}}" class="w-16 h-16 border-4 border-brawl-black">
              <span class="text-sm {{ brawler.probability < 10 ? 'text-red-300' : brawler.probability > 90 ? 'text-brawl-gold' : 'text-brawl-white' }}">{{brawler.probability}}%</span>
              <div class="brawl-heart absolute -top-1 -left-1" *ngIf="brawler.userFavorite">
                <i class="pi pi-heart-fill"></i>
              </div>
            </div>
          </div>
        </div>

        <span *ngIf="brawlers.length === 0" class="text-2xl text-shadow text-border-sm text-brawl-yellow">No hay brawlers</span>
      </div>

      <h1 class="text-5xl mt-10 font-bold text-shadow text-border-sm">Opiniones</h1>
      <div class="flex flex-col gap-5 mb-5">
        <app-review *ngFor="let review of showReviews" [review]="review"></app-review>

        <span *ngIf="showReviews.length === 0" class="text-2xl text-shadow text-border-sm text-brawl-yellow">No hay opiniones</span>

        <button class="brawl-button" (click)="showMoreReviews()" *ngIf="showReviews.length < allReviews.length">VER MÁS</button>
      </div>

    </div>
  </div>
  <app-cart-btn/>
</div>
